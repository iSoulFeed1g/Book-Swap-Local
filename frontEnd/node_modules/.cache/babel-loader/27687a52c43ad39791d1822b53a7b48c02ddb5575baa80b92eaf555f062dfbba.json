{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./Login.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[errorMessage,setErrorMessage]=useState('');const navigate=useNavigate();const handleLogin=e=>{e.preventDefault();setErrorMessage('');axios.post('http://localhost:8081/login',{email,password}).then(res=>{if(res.data===\"Failed\"){setErrorMessage('Invalid email or password');}else{localStorage.setItem('user',JSON.stringify(res.data));localStorage.setItem('userId',res.data.id);// Store userId in localStorage\nnavigate('/home');}}).catch(err=>{if(err.response&&err.response.status===401){setErrorMessage(err.response.data);}else{setErrorMessage('Login failed');}console.error(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-title\",children:[\"\\uD83D\\uDCDA \",/*#__PURE__*/_jsx(\"span\",{children:\"Book-Swap\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Log in\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value),className:\"form-control\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"form-control\",required:true})]}),errorMessage&&/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:errorMessage}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Log in\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Sign up\"})]})]})]});}export default Login;","map":{"version":3,"names":["React","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","password","setPassword","errorMessage","setErrorMessage","navigate","handleLogin","e","preventDefault","post","then","res","data","localStorage","setItem","JSON","stringify","id","catch","err","response","status","console","error","className","children","onSubmit","htmlFor","type","value","onChange","target","required","href"],"sources":["C:/Users/Vanja/Desktop/Vanja/GitHub/Book-Swap-Local/frontEnd/src/Login/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Login.css';\r\n\r\nfunction Login() {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    const handleLogin = (e) => {\r\n        e.preventDefault();\r\n        setErrorMessage('');\r\n\r\n        axios.post('http://localhost:8081/login', { email, password })\r\n            .then(res => {\r\n                if (res.data === \"Failed\") {\r\n                    setErrorMessage('Invalid email or password');\r\n                } else {\r\n                    localStorage.setItem('user', JSON.stringify(res.data));\r\n                    localStorage.setItem('userId', res.data.id); // Store userId in localStorage\r\n                    navigate('/home');\r\n                }\r\n            })\r\n            .catch(err => {\r\n                if (err.response && err.response.status === 401) {\r\n                    setErrorMessage(err.response.data);\r\n                } else {\r\n                    setErrorMessage('Login failed');\r\n                }\r\n                console.error(err);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div className=\"login-container\">\r\n            <div className=\"login-title\">\r\n                ðŸ“š <span>Book-Swap</span>\r\n            </div>\r\n            <div className=\"login-box\">\r\n                <h2>Log in</h2>\r\n                <form onSubmit={handleLogin}>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"email\">Email</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            id=\"email\"\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            className=\"form-control\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            className=\"form-control\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                    {errorMessage && <span className=\"text-danger\">{errorMessage}</span>}\r\n                    <button type=\"submit\" className=\"btn btn-primary\">Log in</button>\r\n                </form>\r\n                <p>Don't have an account? <a href=\"/signup\">Sign up</a></p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}