{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vanja\\\\Desktop\\\\Vanja\\\\GitHub\\\\Book-Swap-Local\\\\frontEnd\\\\src\\\\Pages\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './Home.css';\nimport { useNavigate } from 'react-router-dom';\nimport Post from './Post';\nimport FilterModal from './FilterModal';\nimport Layout from './Layout';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Home() {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterOptions, setFilterOptions] = useState({\n    sortBy: '',\n    genre: ''\n  });\n  const [showFilterModal, setShowFilterModal] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetchPosts();\n  }, [filterOptions]);\n  const fetchPosts = () => {\n    axios.get('http://localhost:8081/posts', {\n      params: {\n        ...filterOptions,\n        searchQuery\n      }\n    }).then(res => {\n      setPosts(res.data);\n    }).catch(err => {\n      console.error('Error fetching posts:', err);\n    });\n  };\n  const handleSearch = e => {\n    setSearchQuery(e.target.value);\n  };\n  const handleFilter = options => {\n    setFilterOptions(options);\n  };\n  const toggleFilterModal = () => {\n    setShowFilterModal(!showFilterModal);\n  };\n  const handlePostClick = post => {\n    const userData = localStorage.getItem('user');\n    if (userData && JSON.parse(userData).email === post.user_email) {\n      navigate(`/own-post-detail/${post.id}`);\n    } else {\n      navigate(`/post/${post.id}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"home-container\",\n      children: [showFilterModal && /*#__PURE__*/_jsxDEV(FilterModal, {\n        filterOptions: filterOptions,\n        onFilter: handleFilter,\n        onClose: toggleFilterModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"posts-container\",\n        children: posts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-posts-message\",\n          children: \"No posts available\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this) : posts.map(post => /*#__PURE__*/_jsxDEV(Post, {\n          post: post,\n          onClick: () => handlePostClick(post)\n        }, post.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n}\n_s(Home, \"rdprQ0+iIXCyv5ppKRcOSYSU4K4=\", false, function () {\n  return [useNavigate];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","Post","FilterModal","Layout","jsxDEV","_jsxDEV","Home","_s","posts","setPosts","searchQuery","setSearchQuery","filterOptions","setFilterOptions","sortBy","genre","showFilterModal","setShowFilterModal","navigate","fetchPosts","get","params","then","res","data","catch","err","console","error","handleSearch","e","target","value","handleFilter","options","toggleFilterModal","handlePostClick","post","userData","localStorage","getItem","JSON","parse","email","user_email","id","children","className","onFilter","onClose","fileName","_jsxFileName","lineNumber","columnNumber","length","map","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Vanja/Desktop/Vanja/GitHub/Book-Swap-Local/frontEnd/src/Pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './Home.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Post from './Post';\r\nimport FilterModal from './FilterModal';\r\nimport Layout from './Layout';\r\n\r\nfunction Home() {\r\n    const [posts, setPosts] = useState([]);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [filterOptions, setFilterOptions] = useState({\r\n        sortBy: '',\r\n        genre: '',\r\n    });\r\n    const [showFilterModal, setShowFilterModal] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        fetchPosts();\r\n    }, [filterOptions]);\r\n\r\n    const fetchPosts = () => {\r\n        axios.get('http://localhost:8081/posts', {\r\n            params: {\r\n                ...filterOptions,\r\n                searchQuery,\r\n            },\r\n        })\r\n            .then(res => {\r\n            setPosts(res.data);\r\n        })\r\n        .catch(err => {\r\n            console.error('Error fetching posts:', err);\r\n        });\r\n    };\r\n\r\n    const handleSearch = (e) => {\r\n        setSearchQuery(e.target.value);\r\n    };\r\n\r\n    const handleFilter = (options) => {\r\n        setFilterOptions(options);\r\n    };\r\n\r\n    const toggleFilterModal = () => {\r\n        setShowFilterModal(!showFilterModal);\r\n    };\r\n\r\n    const handlePostClick = (post) => {\r\n        const userData = localStorage.getItem('user');\r\n        if (userData && JSON.parse(userData).email === post.user_email) {\r\n            navigate(`/own-post-detail/${post.id}`);\r\n        } else {\r\n            navigate(`/post/${post.id}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Layout>\r\n            <div className=\"home-container\">\r\n                {showFilterModal && (\r\n                    <FilterModal \r\n                        filterOptions={filterOptions} \r\n                        onFilter={handleFilter} \r\n                        onClose={toggleFilterModal} \r\n                    />\r\n                )}\r\n                <div className=\"posts-container\">\r\n                    {posts.length === 0 ? (\r\n                        <div className=\"no-posts-message\">No posts available</div>\r\n                    ) : (\r\n                        posts.map(post => (\r\n                            <Post \r\n                                key={post.id} \r\n                                post={post} \r\n                                onClick={() => handlePostClick(post)} \r\n                            />\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}