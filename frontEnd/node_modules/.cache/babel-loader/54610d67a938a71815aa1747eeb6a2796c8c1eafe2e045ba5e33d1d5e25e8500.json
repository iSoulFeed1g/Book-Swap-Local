{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate,useLocation}from'react-router-dom';import Layout from'./Layout';import'./Home.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function Guest(){const[posts,setPosts]=useState([]);const[searchQuery,setSearchQuery]=useState('');const[filter,setFilter]=useState({sortBy:'newest',genre:''});const navigate=useNavigate();const location=useLocation();useEffect(()=>{const params=new URLSearchParams(location.search);const searchTerm=params.get('searchTerm')||'';const sortBy=params.get('sortBy')||'newest';const genre=params.get('genre')||'';setSearchQuery(searchTerm);setFilter({sortBy,genre});},[location.search]);useEffect(()=>{fetchPosts();},[filter,searchQuery]);const fetchPosts=()=>{axios.get('http://localhost:8081/posts',{params:{...filter,searchTerm:searchQuery}}).then(res=>{const postsWithUsernames=res.data.map(post=>({...post,user_name:post.user_name||'Unknown'}));setPosts(postsWithUsernames);}).catch(err=>{console.log(\"Error fetching posts:\",err);});};const handleSearch=query=>{setSearchQuery(query);setFilter({...filter,query});navigate(\"/guest?searchTerm=\".concat(query));};const handleFilterChange=newFilter=>{setFilter(newFilter);};const handleCardClick=postId=>{navigate(\"/post/\".concat(postId));};return/*#__PURE__*/_jsxs(Layout,{onSearch:handleSearch,onFilterChange:handleFilterChange,children:[/*#__PURE__*/_jsx(\"div\",{className:\"home-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"posts-list\",children:posts.length?posts.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:\"post-card\",onClick:()=>handleCardClick(post.id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"post-price-container\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"post-price\",children:[\"\\u20AC\",parseFloat(post.price).toFixed(2)]})}),/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8081/\".concat(post.picture),alt:post.title,className:\"post-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-details\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"post-title\",children:post.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"post-author\",children:[\"Author: \",post.author]}),/*#__PURE__*/_jsxs(\"p\",{className:\"post-genre\",children:[\"Genre: \",post.genre]}),/*#__PURE__*/_jsxs(\"p\",{className:\"post-user\",children:[\"Posted by: \",post.user_name]})]})]},post.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No posts found\"})})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary add-post-btn\",onClick:()=>navigate('/login'),children:\"Login / Sign Up\"})]});}export default Guest;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","useLocation","Layout","jsxs","_jsxs","jsx","_jsx","Guest","posts","setPosts","searchQuery","setSearchQuery","filter","setFilter","sortBy","genre","navigate","location","params","URLSearchParams","search","searchTerm","get","fetchPosts","then","res","postsWithUsernames","data","map","post","user_name","catch","err","console","log","handleSearch","query","concat","handleFilterChange","newFilter","handleCardClick","postId","onSearch","onFilterChange","children","className","length","onClick","id","parseFloat","price","toFixed","src","picture","alt","title","author"],"sources":["C:/Users/Vanja/Desktop/Vanja/GitHub/Book-Swap-Local/frontEnd/src/Pages/Guest.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport Layout from './Layout';\r\nimport './Home.css';\r\n\r\nfunction Guest() {\r\n    const [posts, setPosts] = useState([]);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [filter, setFilter] = useState({ sortBy: 'newest', genre: '' });\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n        const params = new URLSearchParams(location.search);\r\n        const searchTerm = params.get('searchTerm') || '';\r\n        const sortBy = params.get('sortBy') || 'newest';\r\n        const genre = params.get('genre') || '';\r\n        setSearchQuery(searchTerm);\r\n        setFilter({ sortBy, genre });\r\n    }, [location.search]);\r\n\r\n    useEffect(() => {\r\n        fetchPosts();\r\n    }, [filter, searchQuery]);\r\n\r\n    const fetchPosts = () => {\r\n        axios.get('http://localhost:8081/posts', { params: { ...filter, searchTerm: searchQuery } }) \r\n            .then(res => {\r\n                const postsWithUsernames = res.data.map(post => ({\r\n                    ...post,\r\n                    user_name: post.user_name || 'Unknown',\r\n                }));\r\n                setPosts(postsWithUsernames);\r\n            })\r\n            .catch(err => {\r\n                console.log(\"Error fetching posts:\", err);\r\n            });\r\n    };\r\n\r\n    const handleSearch = (query) => {\r\n        setSearchQuery(query);\r\n        setFilter({ ...filter, query });\r\n        navigate(`/guest?searchTerm=${query}`);\r\n    };\r\n\r\n    const handleFilterChange = (newFilter) => {\r\n        setFilter(newFilter);\r\n    };\r\n\r\n    const handleCardClick = (postId) => {\r\n        navigate(`/post/${postId}`);\r\n    };\r\n\r\n    return (\r\n        <Layout onSearch={handleSearch} onFilterChange={handleFilterChange}>\r\n            <div className=\"home-container\">\r\n                <div className=\"posts-list\">\r\n                    {posts.length ? posts.map(post => (\r\n                        <div key={post.id} className=\"post-card\" onClick={() => handleCardClick(post.id)}>\r\n                            <div className=\"post-price-container\">\r\n                                <p className=\"post-price\">â‚¬{parseFloat(post.price).toFixed(2)}</p>\r\n                            </div>\r\n                            <img src={`http://localhost:8081/${post.picture}`} alt={post.title} className=\"post-image\" />\r\n                            <div className=\"post-details\">\r\n                                <h2 className=\"post-title\">{post.title}</h2>\r\n                                <p className=\"post-author\">Author: {post.author}</p>\r\n                                <p className=\"post-genre\">Genre: {post.genre}</p>\r\n                                <p className=\"post-user\">Posted by: {post.user_name}</p>\r\n                            </div>\r\n                        </div>\r\n                    )) : <p>No posts found</p>}\r\n                </div>\r\n            </div>\r\n            <button className=\"btn btn-primary add-post-btn\" onClick={() => navigate('/login')}>Login / Sign Up</button>\r\n        </Layout>\r\n    );\r\n}\r\n\r\nexport default Guest;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}