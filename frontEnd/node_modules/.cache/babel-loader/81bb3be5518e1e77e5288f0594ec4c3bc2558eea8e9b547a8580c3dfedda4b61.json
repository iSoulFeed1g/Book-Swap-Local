{"ast":null,"code":"import React,{useState,useEffect}from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faThumbsUp,faThumbsDown,faEdit,faTrash}from'@fortawesome/free-solid-svg-icons';import axios from'axios';import'./PostDetail.css';import{useNavigate,useParams}from'react-router-dom';import Layout from'./Layout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function OwnPostDetail(){const{id}=useParams();const navigate=useNavigate();const[post,setPost]=useState(null);const[showDeleteModal,setShowDeleteModal]=useState(false);useEffect(()=>{const fetchPost=async()=>{try{const response=await axios.get(\"http://localhost:8081/post/\".concat(id));setPost(response.data);}catch(err){console.error('Error fetching post:',err);}};fetchPost();},[id]);if(!post){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading post details...\"});}const handleEditPost=id=>{navigate(\"/edit-post/\".concat(id));};const handleDeletePost=()=>{setShowDeleteModal(true);};const confirmDeletePost=async()=>{try{const response=await axios.post('http://localhost:8081/delete-post',{id:post.id});if(response.data.message===\"Success\"){navigate('/home');}else{alert(\"Failed to delete post\");}}catch(err){console.error(\"Error deleting post:\",err);alert(\"Error deleting post\");}};const cancelDeletePost=()=>{setShowDeleteModal(false);};const handleSearch=query=>{console.log('Search query:',query);};return/*#__PURE__*/_jsx(Layout,{onSearch:handleSearch,children:/*#__PURE__*/_jsxs(\"div\",{className:\"post-detail-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"post-title\",children:post.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"post-price\",children:[\"Price: \\u20AC\",parseFloat(post.price).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post-image-section\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8081/\".concat(post.picture),alt:post.title,className:\"post-image-large\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-info-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-user-info\",children:[post.user_profile_pic&&/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8081/\".concat(post.user_profile_pic),alt:post.user_name,className:\"user-profile-pic\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info-text\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"post-user-name\",children:post.user_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-user-likes\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"likes\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faThumbsUp}),\" \",post.user_likes]}),/*#__PURE__*/_jsxs(\"span\",{className:\"dislikes\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faThumbsDown}),\" \",post.user_dislikes]})]})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"post-description\",children:post.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-actions\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"likes\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faThumbsUp}),\" 10\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"dislikes\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faThumbsDown}),\" 2\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-management-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>handleEditPost(post.id),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEdit}),\" Edit Post\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-danger\",onClick:handleDeletePost,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash}),\" Delete Post\"]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"post-user\",children:[\"Posted by: \",post.user_name||'Unknown']})]})]}),showDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Are you sure you want to delete this post?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:confirmDeletePost,children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:cancelDeletePost,children:\"Cancel\"})]})]})})]})});}export default OwnPostDetail;","map":{"version":3,"names":["React","useState","useEffect","FontAwesomeIcon","faThumbsUp","faThumbsDown","faEdit","faTrash","axios","useNavigate","useParams","Layout","jsx","_jsx","jsxs","_jsxs","OwnPostDetail","id","navigate","post","setPost","showDeleteModal","setShowDeleteModal","fetchPost","response","get","concat","data","err","console","error","children","handleEditPost","handleDeletePost","confirmDeletePost","message","alert","cancelDeletePost","handleSearch","query","log","onSearch","className","title","parseFloat","price","toFixed","src","picture","alt","user_profile_pic","user_name","icon","user_likes","user_dislikes","description","onClick"],"sources":["C:/Users/Vanja/Desktop/Vanja/GitHub/Book-Swap-Local/frontEnd/src/Pages/OwnPostDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faThumbsUp, faThumbsDown, faEdit, faTrash } from '@fortawesome/free-solid-svg-icons';\r\nimport axios from 'axios';\r\nimport './PostDetail.css';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport Layout from './Layout';\r\n\r\nfunction OwnPostDetail() {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const [post, setPost] = useState(null);\r\n    const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchPost = async () => {\r\n            try {\r\n                const response = await axios.get(`http://localhost:8081/post/${id}`);\r\n                setPost(response.data);\r\n            } catch (err) {\r\n                console.error('Error fetching post:', err);\r\n            }\r\n        };\r\n\r\n        fetchPost();\r\n    }, [id]);\r\n\r\n    if (!post) {\r\n        return <div>Loading post details...</div>;\r\n    }\r\n\r\n    const handleEditPost = (id) => {\r\n        navigate(`/edit-post/${id}`);\r\n    };\r\n\r\n    const handleDeletePost = () => {\r\n        setShowDeleteModal(true);\r\n    };\r\n\r\n    const confirmDeletePost = async () => {\r\n        try {\r\n            const response = await axios.post('http://localhost:8081/delete-post', { id: post.id });\r\n            if (response.data.message === \"Success\") {\r\n                navigate('/home');\r\n            } else {\r\n                alert(\"Failed to delete post\");\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Error deleting post:\", err);\r\n            alert(\"Error deleting post\");\r\n        }\r\n    };\r\n\r\n    const cancelDeletePost = () => {\r\n        setShowDeleteModal(false);\r\n    };\r\n\r\n    const handleSearch = (query) => {\r\n        console.log('Search query:', query);\r\n    };\r\n\r\n    return (\r\n        <Layout onSearch={handleSearch}>\r\n            <div className=\"post-detail-container\">\r\n                <div className=\"post-header\">\r\n                    <h1 className=\"post-title\">{post.title}</h1>\r\n                    <p className=\"post-price\">Price: â‚¬{parseFloat(post.price).toFixed(2)}</p>\r\n                </div>\r\n                <div className=\"post-content\">\r\n                    <div className=\"post-image-section\">\r\n                        <img src={`http://localhost:8081/${post.picture}`} alt={post.title} className=\"post-image-large\" />\r\n                    </div>\r\n                    <div className=\"post-info-section\">\r\n                        <div className=\"post-user-info\">\r\n                            {post.user_profile_pic && (\r\n                                <img src={`http://localhost:8081/${post.user_profile_pic}`} alt={post.user_name} className=\"user-profile-pic\" />\r\n                            )}\r\n                            <div className=\"user-info-text\">\r\n                                <p className=\"post-user-name\">{post.user_name}</p>\r\n                                <div className=\"post-user-likes\">\r\n                                    <span className=\"likes\"><FontAwesomeIcon icon={faThumbsUp} /> {post.user_likes}</span>\r\n                                    <span className=\"dislikes\"><FontAwesomeIcon icon={faThumbsDown} /> {post.user_dislikes}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"post-description\">{post.description}</p>\r\n                        <div className=\"post-actions\">\r\n                            <span className=\"likes\"><FontAwesomeIcon icon={faThumbsUp} /> 10</span>\r\n                            <span className=\"dislikes\"><FontAwesomeIcon icon={faThumbsDown} /> 2</span>\r\n                        </div>\r\n                        <div className=\"post-management-actions\">\r\n                            <button className=\"btn btn-primary\" onClick={() => handleEditPost(post.id)}><FontAwesomeIcon icon={faEdit} /> Edit Post</button>\r\n                            <button className=\"btn btn-danger\" onClick={handleDeletePost}><FontAwesomeIcon icon={faTrash} /> Delete Post</button>\r\n                        </div>\r\n                        <p className=\"post-user\">Posted by: {post.user_name || 'Unknown'}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {showDeleteModal && (\r\n                    <div className=\"modal-overlay\">\r\n                        <div className=\"modal-content\">\r\n                            <h2>Are you sure you want to delete this post?</h2>\r\n                            <div className=\"modal-actions\">\r\n                                <button className=\"btn btn-danger\" onClick={confirmDeletePost}>Delete</button>\r\n                                <button className=\"btn btn-secondary\" onClick={cancelDeletePost}>Cancel</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </Layout>\r\n    );\r\n}\r\n\r\nexport default OwnPostDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}