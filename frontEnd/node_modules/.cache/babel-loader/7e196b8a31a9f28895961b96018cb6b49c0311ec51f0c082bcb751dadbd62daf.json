{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faHome,faUser,faCog,faPaperPlane,faSearch,faPlus,faFilter}from'@fortawesome/free-solid-svg-icons';import FilterModal from'./FilterModal';import'./Layout.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Layout=_ref=>{let{children,onSearch,onFilterChange,hasUnreadMessages}=_ref;// Add hasUnreadMessages prop\nconst navigate=useNavigate();const location=useLocation();const[searchQuery,setSearchQuery]=useState('');const[filterVisible,setFilterVisible]=useState(false);const[isLoggedIn,setIsLoggedIn]=useState(false);useEffect(()=>{const user=localStorage.getItem('user');setIsLoggedIn(!!user);},[]);const isActive=path=>location.pathname===path;const handleSearchChange=e=>{setSearchQuery(e.target.value);};const handleSearchSubmit=e=>{e.preventDefault();onSearch(searchQuery);// Call the onSearch prop with the current search query\n};const toggleFilter=()=>{setFilterVisible(!filterVisible);};const handleFilterChange=filters=>{const{genre,sortBy}=filters;const query=new URLSearchParams({genre:genre||'',sortBy:sortBy||'',searchTerm:searchQuery||''}).toString();setFilterVisible(false);// Close the filter modal after applying filters\nonFilterChange(filters);// Call the onFilterChange prop with the new filters\nnavigate(\"/home?\".concat(query));};const handleHomeClick=()=>{if(isLoggedIn){navigate('/home');}else{navigate('/');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"layout-container\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-icon \".concat(isActive('/home')?'active':''),onClick:handleHomeClick,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faHome})}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-icon \".concat(isActive('/profile')?'active':''),onClick:()=>navigate('/profile'),children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faUser})}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-icon \".concat(isActive('/inbox')?'active':''),onClick:()=>navigate('/inbox'),children:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[\" \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPaperPlane}),hasUnreadMessages&&/*#__PURE__*/_jsx(\"div\",{className:\"unread-dot\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-icon \".concat(isActive('/settings')?'active':''),onClick:()=>navigate('/settings'),children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCog})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8081/uploads/logo.png\",alt:\"Logo\",className:\"logo\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearchSubmit,className:\"search-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search...\",value:searchQuery,onChange:handleSearchChange,className:\"search-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"search-button\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSearch})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"filter-button\",onClick:toggleFilter,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faFilter})})]}),isLoggedIn?/*#__PURE__*/_jsxs(\"button\",{className:\"add-post-button\",onClick:()=>navigate('/create-post'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPlus}),\" Add Post\"]}):/*#__PURE__*/_jsx(\"button\",{className:\"login-signup-button\",onClick:()=>navigate('/login'),children:\"Login\"})]}),children,filterVisible&&/*#__PURE__*/_jsx(FilterModal,{onClose:toggleFilter,onFilterChange:handleFilterChange})]})]});};export default Layout;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","FontAwesomeIcon","faHome","faUser","faCog","faPaperPlane","faSearch","faPlus","faFilter","FilterModal","jsx","_jsx","jsxs","_jsxs","Layout","_ref","children","onSearch","onFilterChange","hasUnreadMessages","navigate","location","searchQuery","setSearchQuery","filterVisible","setFilterVisible","isLoggedIn","setIsLoggedIn","user","localStorage","getItem","isActive","path","pathname","handleSearchChange","e","target","value","handleSearchSubmit","preventDefault","toggleFilter","handleFilterChange","filters","genre","sortBy","query","URLSearchParams","searchTerm","toString","concat","handleHomeClick","className","onClick","icon","style","position","src","alt","onSubmit","type","placeholder","onChange","onClose"],"sources":["C:/Users/Vanja/Desktop/Vanja/GitHub/Book-Swap-Local/frontEnd/src/Pages/Layout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faHome, faUser, faCog, faPaperPlane, faSearch, faPlus, faFilter } from '@fortawesome/free-solid-svg-icons';\r\nimport FilterModal from './FilterModal';\r\nimport './Layout.css';\r\n\r\nconst Layout = ({ children, onSearch, onFilterChange, hasUnreadMessages }) => { // Add hasUnreadMessages prop\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [filterVisible, setFilterVisible] = useState(false);\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const user = localStorage.getItem('user');\r\n        setIsLoggedIn(!!user);\r\n    }, []);\r\n\r\n    const isActive = (path) => location.pathname === path;\r\n\r\n    const handleSearchChange = (e) => {\r\n        setSearchQuery(e.target.value);\r\n    };\r\n\r\n    const handleSearchSubmit = (e) => {\r\n        e.preventDefault();\r\n        onSearch(searchQuery); // Call the onSearch prop with the current search query\r\n    };\r\n\r\n    const toggleFilter = () => {\r\n        setFilterVisible(!filterVisible);\r\n    };\r\n\r\n    const handleFilterChange = (filters) => {\r\n        const { genre, sortBy } = filters;\r\n        const query = new URLSearchParams({\r\n            genre: genre || '',\r\n            sortBy: sortBy || '',\r\n            searchTerm: searchQuery || '',\r\n        }).toString();\r\n        setFilterVisible(false); // Close the filter modal after applying filters\r\n        onFilterChange(filters); // Call the onFilterChange prop with the new filters\r\n        navigate(`/home?${query}`);\r\n    };\r\n\r\n\r\n    const handleHomeClick = () => {\r\n        if (isLoggedIn) {\r\n            navigate('/home');\r\n        } else {\r\n            navigate('/');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"layout-container\">\r\n            <aside className=\"sidebar\">\r\n                <div className={`sidebar-icon ${isActive('/home') ? 'active' : ''}`} onClick={handleHomeClick}>\r\n                    <FontAwesomeIcon icon={faHome} />\r\n                </div>\r\n                <div className={`sidebar-icon ${isActive('/profile') ? 'active' : ''}`} onClick={() => navigate('/profile')}>\r\n                    <FontAwesomeIcon icon={faUser} />\r\n                </div>\r\n                <div className={`sidebar-icon ${isActive('/inbox') ? 'active' : ''}`} onClick={() => navigate('/inbox')}>\r\n                    <div style={{ position: 'relative' }}> {/* Added this wrapper */}\r\n                        <FontAwesomeIcon icon={faPaperPlane} />\r\n                        {hasUnreadMessages && <div className=\"unread-dot\"></div>}\r\n                    </div>\r\n                </div>\r\n                <div className={`sidebar-icon ${isActive('/settings') ? 'active' : ''}`} onClick={() => navigate('/settings')}>\r\n                    <FontAwesomeIcon icon={faCog} />\r\n                </div>\r\n            </aside>\r\n            <div className=\"main-content\">\r\n                <header className=\"header\">\r\n                    <img src=\"http://localhost:8081/uploads/logo.png\" alt=\"Logo\" className=\"logo\" />\r\n                    <form onSubmit={handleSearchSubmit} className=\"search-form\">\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search...\"\r\n                            value={searchQuery}\r\n                            onChange={handleSearchChange}\r\n                            className=\"search-input\"\r\n                        />\r\n                        <button type=\"submit\" className=\"search-button\">\r\n                            <FontAwesomeIcon icon={faSearch} />\r\n                        </button>\r\n                        <button type=\"button\" className=\"filter-button\" onClick={toggleFilter}>\r\n                            <FontAwesomeIcon icon={faFilter} />\r\n                        </button>\r\n                    </form>\r\n                    {isLoggedIn ? (\r\n                        <button className=\"add-post-button\" onClick={() => navigate('/create-post')}>\r\n                            <FontAwesomeIcon icon={faPlus} /> Add Post\r\n                        </button>\r\n                    ) : (\r\n                        <button className=\"login-signup-button\" onClick={() => navigate('/login')}>\r\n                            Login\r\n                        </button>\r\n                    )}\r\n\r\n                </header>\r\n                {children}\r\n                {filterVisible && (\r\n                    <FilterModal onClose={toggleFilter} onFilterChange={handleFilterChange} />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Layout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}