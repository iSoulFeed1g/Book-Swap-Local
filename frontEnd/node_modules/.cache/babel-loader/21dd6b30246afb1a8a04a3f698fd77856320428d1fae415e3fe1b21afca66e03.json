{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useParams,useNavigate}from'react-router-dom';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faThumbsUp,faThumbsDown}from'@fortawesome/free-solid-svg-icons';import'./PostDetail.css';import Layout from'./Layout';import ChatModal from'./ChatModal';import LoginModal from'./LoginModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PostDetail(){const{id}=useParams();const navigate=useNavigate();const[post,setPost]=useState(null);const[user,setUser]=useState(null);const[showChatModal,setShowChatModal]=useState(false);const[showLoginModal,setShowLoginModal]=useState(false);useEffect(()=>{const userData=localStorage.getItem('user');if(userData){setUser(JSON.parse(userData));}fetchPost();},[]);const fetchPost=()=>{axios.get(\"http://localhost:8081/post/\".concat(id)).then(res=>{const fetchedPost=res.data;setPost(fetchedPost);// Check if the current user is the author of the post\nif(fetchedPost.user_id===(user===null||user===void 0?void 0:user.id)){navigate(\"/own-post/\".concat(id));// Navigate to OwnPostDetail page\n}}).catch(err=>{console.log(\"Error fetching post:\",err);});};const handleContactSeller=()=>{if(!user){setShowLoginModal(true);// Show login modal if user isn't logged in\n}else{setShowChatModal(true);// Show chat modal if user is logged in\n}};const handleSearch=query=>{console.log('Search query:',query);};if(!post){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(Layout,{onSearch:handleSearch,children:/*#__PURE__*/_jsxs(\"div\",{className:\"post-detail-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"post-title\",children:post.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"post-price\",children:[\"Price: \\u20AC\",parseFloat(post.price).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post-image-section\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8081/\".concat(post.picture),alt:post.title,className:\"post-image-large\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-info-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-user-info\",children:[post.user_profile_pic&&/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8081/\".concat(post.user_profile_pic),alt:post.user_name,className:\"user-profile-pic\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info-text\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"post-user-name\",children:post.user_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-user-likes\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"likes\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faThumbsUp}),\" \",post.user_likes]}),/*#__PURE__*/_jsxs(\"span\",{className:\"dislikes\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faThumbsDown}),\" \",post.user_dislikes]})]})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"post-description\",children:post.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-actions\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"likes\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faThumbsUp}),\" 10\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"dislikes\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faThumbsDown}),\" 2\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"purchase-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:\"Buy Now\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",children:\"Add to Cart\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",children:\"Add to Wishlist\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleContactSeller,children:\"Contact Seller\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"post-user\",children:[\"Posted by: \",post.user_name||'Unknown']})]})]}),showChatModal&&/*#__PURE__*/_jsx(ChatModal,{post:post,user:user,onClose:()=>setShowChatModal(false)}),showLoginModal&&/*#__PURE__*/_jsx(LoginModal,{onClose:()=>setShowLoginModal(false),onLogin:()=>navigate('/login')})]})});}export default PostDetail;","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","FontAwesomeIcon","faThumbsUp","faThumbsDown","Layout","ChatModal","LoginModal","jsx","_jsx","jsxs","_jsxs","PostDetail","id","navigate","post","setPost","user","setUser","showChatModal","setShowChatModal","showLoginModal","setShowLoginModal","userData","localStorage","getItem","JSON","parse","fetchPost","get","concat","then","res","fetchedPost","data","user_id","catch","err","console","log","handleContactSeller","handleSearch","query","children","onSearch","className","title","parseFloat","price","toFixed","src","picture","alt","user_profile_pic","user_name","icon","user_likes","user_dislikes","description","onClick","onClose","onLogin"],"sources":["C:/Users/Vanja/Desktop/Vanja/GitHub/Book-Swap-Local/frontEnd/src/Pages/PostDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faThumbsUp, faThumbsDown } from '@fortawesome/free-solid-svg-icons';\r\nimport './PostDetail.css';\r\nimport Layout from './Layout';\r\nimport ChatModal from './ChatModal';\r\nimport LoginModal from './LoginModal';\r\n\r\nfunction PostDetail() {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const [post, setPost] = useState(null);\r\n    const [user, setUser] = useState(null);\r\n    const [showChatModal, setShowChatModal] = useState(false);\r\n    const [showLoginModal, setShowLoginModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const userData = localStorage.getItem('user');\r\n        if (userData) {\r\n            setUser(JSON.parse(userData));\r\n        }\r\n        fetchPost();\r\n    }, []);\r\n\r\n    const fetchPost = () => {\r\n        axios.get(`http://localhost:8081/post/${id}`)\r\n            .then(res => {\r\n                const fetchedPost = res.data;\r\n                setPost(fetchedPost);\r\n\r\n                // Check if the current user is the author of the post\r\n                if (fetchedPost.user_id === user?.id) {\r\n                    navigate(`/own-post/${id}`); // Navigate to OwnPostDetail page\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(\"Error fetching post:\", err);\r\n            });\r\n    };\r\n\r\n    const handleContactSeller = () => {\r\n        if (!user) {\r\n            setShowLoginModal(true); // Show login modal if user isn't logged in\r\n        } else {\r\n            setShowChatModal(true); // Show chat modal if user is logged in\r\n        }\r\n    };\r\n    \r\n\r\n    const handleSearch = (query) => {\r\n        console.log('Search query:', query);\r\n    };\r\n\r\n    if (!post) {\r\n        return <div>Loading...</div>;\r\n    }\r\n\r\n    return (\r\n        <Layout onSearch={handleSearch}>\r\n            <div className=\"post-detail-container\">\r\n                <div className=\"post-header\">\r\n                    <h1 className=\"post-title\">{post.title}</h1>\r\n                    <p className=\"post-price\">Price: â‚¬{parseFloat(post.price).toFixed(2)}</p>\r\n                </div>\r\n                <div className=\"post-content\">\r\n                    <div className=\"post-image-section\">\r\n                        <img src={`http://localhost:8081/${post.picture}`} alt={post.title} className=\"post-image-large\" />\r\n                    </div>\r\n                    <div className=\"post-info-section\">\r\n                        <div className=\"post-user-info\">\r\n                            {post.user_profile_pic && (\r\n                                <img src={`http://localhost:8081/${post.user_profile_pic}`} alt={post.user_name} className=\"user-profile-pic\" />\r\n                            )}\r\n                            <div className=\"user-info-text\">\r\n                                <p className=\"post-user-name\">{post.user_name}</p>\r\n                                <div className=\"post-user-likes\">\r\n                                    <span className=\"likes\"><FontAwesomeIcon icon={faThumbsUp} /> {post.user_likes}</span>\r\n                                    <span className=\"dislikes\"><FontAwesomeIcon icon={faThumbsDown} /> {post.user_dislikes}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"post-description\">{post.description}</p>\r\n                        <div className=\"post-actions\">\r\n                            <span className=\"likes\"><FontAwesomeIcon icon={faThumbsUp} /> 10</span>\r\n                            <span className=\"dislikes\"><FontAwesomeIcon icon={faThumbsDown} /> 2</span>\r\n                        </div>\r\n                        <div className=\"purchase-actions\">\r\n                            <button className=\"btn btn-primary\">Buy Now</button>\r\n                            <button className=\"btn btn-secondary\">Add to Cart</button>\r\n                            <button className=\"btn btn-secondary\">Add to Wishlist</button>\r\n                            <button className=\"btn btn-secondary\" onClick={handleContactSeller}>Contact Seller</button>\r\n                        </div>\r\n                        <p className=\"post-user\">Posted by: {post.user_name || 'Unknown'}</p>\r\n                    </div>\r\n                </div>\r\n                {showChatModal && (\r\n                    <ChatModal\r\n                        post={post}\r\n                        user={user}\r\n                        onClose={() => setShowChatModal(false)}\r\n                    />\r\n                )}\r\n                {showLoginModal && (\r\n                    <LoginModal\r\n                        onClose={() => setShowLoginModal(false)}\r\n                        onLogin={() => navigate('/login')}\r\n                    />\r\n                )}\r\n            </div>\r\n        </Layout>\r\n    );\r\n}\r\n\r\nexport default PostDetail;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,eAAe,KAAQ,gCAAgC,CAChE,OAASC,UAAU,CAAEC,YAAY,KAAQ,mCAAmC,CAC5E,MAAO,kBAAkB,CACzB,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,MAAO,CAAAC,UAAU,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtC,QAAS,CAAAC,UAAUA,CAAA,CAAG,CAClB,KAAM,CAAEC,EAAG,CAAC,CAAGb,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAc,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACc,IAAI,CAAEC,OAAO,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACoB,IAAI,CAAEC,OAAO,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACsB,aAAa,CAAEC,gBAAgB,CAAC,CAAGvB,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACwB,cAAc,CAAEC,iBAAiB,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CAE3DC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAyB,QAAQ,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC7C,GAAIF,QAAQ,CAAE,CACVL,OAAO,CAACQ,IAAI,CAACC,KAAK,CAACJ,QAAQ,CAAC,CAAC,CACjC,CACAK,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,SAAS,CAAGA,CAAA,GAAM,CACpB7B,KAAK,CAAC8B,GAAG,+BAAAC,MAAA,CAA+BjB,EAAE,CAAE,CAAC,CACxCkB,IAAI,CAACC,GAAG,EAAI,CACT,KAAM,CAAAC,WAAW,CAAGD,GAAG,CAACE,IAAI,CAC5BlB,OAAO,CAACiB,WAAW,CAAC,CAEpB;AACA,GAAIA,WAAW,CAACE,OAAO,IAAKlB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEJ,EAAE,EAAE,CAClCC,QAAQ,cAAAgB,MAAA,CAAcjB,EAAE,CAAE,CAAC,CAAE;AACjC,CACJ,CAAC,CAAC,CACDuB,KAAK,CAACC,GAAG,EAAI,CACVC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEF,GAAG,CAAC,CAC5C,CAAC,CAAC,CACV,CAAC,CAED,KAAM,CAAAG,mBAAmB,CAAGA,CAAA,GAAM,CAC9B,GAAI,CAACvB,IAAI,CAAE,CACPK,iBAAiB,CAAC,IAAI,CAAC,CAAE;AAC7B,CAAC,IAAM,CACHF,gBAAgB,CAAC,IAAI,CAAC,CAAE;AAC5B,CACJ,CAAC,CAGD,KAAM,CAAAqB,YAAY,CAAIC,KAAK,EAAK,CAC5BJ,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEG,KAAK,CAAC,CACvC,CAAC,CAED,GAAI,CAAC3B,IAAI,CAAE,CACP,mBAAON,IAAA,QAAAkC,QAAA,CAAK,YAAU,CAAK,CAAC,CAChC,CAEA,mBACIlC,IAAA,CAACJ,MAAM,EAACuC,QAAQ,CAAEH,YAAa,CAAAE,QAAA,cAC3BhC,KAAA,QAAKkC,SAAS,CAAC,uBAAuB,CAAAF,QAAA,eAClChC,KAAA,QAAKkC,SAAS,CAAC,aAAa,CAAAF,QAAA,eACxBlC,IAAA,OAAIoC,SAAS,CAAC,YAAY,CAAAF,QAAA,CAAE5B,IAAI,CAAC+B,KAAK,CAAK,CAAC,cAC5CnC,KAAA,MAAGkC,SAAS,CAAC,YAAY,CAAAF,QAAA,EAAC,eAAQ,CAACI,UAAU,CAAChC,IAAI,CAACiC,KAAK,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,EAAI,CAAC,EACxE,CAAC,cACNtC,KAAA,QAAKkC,SAAS,CAAC,cAAc,CAAAF,QAAA,eACzBlC,IAAA,QAAKoC,SAAS,CAAC,oBAAoB,CAAAF,QAAA,cAC/BlC,IAAA,QAAKyC,GAAG,0BAAApB,MAAA,CAA2Bf,IAAI,CAACoC,OAAO,CAAG,CAACC,GAAG,CAAErC,IAAI,CAAC+B,KAAM,CAACD,SAAS,CAAC,kBAAkB,CAAE,CAAC,CAClG,CAAC,cACNlC,KAAA,QAAKkC,SAAS,CAAC,mBAAmB,CAAAF,QAAA,eAC9BhC,KAAA,QAAKkC,SAAS,CAAC,gBAAgB,CAAAF,QAAA,EAC1B5B,IAAI,CAACsC,gBAAgB,eAClB5C,IAAA,QAAKyC,GAAG,0BAAApB,MAAA,CAA2Bf,IAAI,CAACsC,gBAAgB,CAAG,CAACD,GAAG,CAAErC,IAAI,CAACuC,SAAU,CAACT,SAAS,CAAC,kBAAkB,CAAE,CAClH,cACDlC,KAAA,QAAKkC,SAAS,CAAC,gBAAgB,CAAAF,QAAA,eAC3BlC,IAAA,MAAGoC,SAAS,CAAC,gBAAgB,CAAAF,QAAA,CAAE5B,IAAI,CAACuC,SAAS,CAAI,CAAC,cAClD3C,KAAA,QAAKkC,SAAS,CAAC,iBAAiB,CAAAF,QAAA,eAC5BhC,KAAA,SAAMkC,SAAS,CAAC,OAAO,CAAAF,QAAA,eAAClC,IAAA,CAACP,eAAe,EAACqD,IAAI,CAAEpD,UAAW,CAAE,CAAC,IAAC,CAACY,IAAI,CAACyC,UAAU,EAAO,CAAC,cACtF7C,KAAA,SAAMkC,SAAS,CAAC,UAAU,CAAAF,QAAA,eAAClC,IAAA,CAACP,eAAe,EAACqD,IAAI,CAAEnD,YAAa,CAAE,CAAC,IAAC,CAACW,IAAI,CAAC0C,aAAa,EAAO,CAAC,EAC7F,CAAC,EACL,CAAC,EACL,CAAC,cACNhD,IAAA,MAAGoC,SAAS,CAAC,kBAAkB,CAAAF,QAAA,CAAE5B,IAAI,CAAC2C,WAAW,CAAI,CAAC,cACtD/C,KAAA,QAAKkC,SAAS,CAAC,cAAc,CAAAF,QAAA,eACzBhC,KAAA,SAAMkC,SAAS,CAAC,OAAO,CAAAF,QAAA,eAAClC,IAAA,CAACP,eAAe,EAACqD,IAAI,CAAEpD,UAAW,CAAE,CAAC,MAAG,EAAM,CAAC,cACvEQ,KAAA,SAAMkC,SAAS,CAAC,UAAU,CAAAF,QAAA,eAAClC,IAAA,CAACP,eAAe,EAACqD,IAAI,CAAEnD,YAAa,CAAE,CAAC,KAAE,EAAM,CAAC,EAC1E,CAAC,cACNO,KAAA,QAAKkC,SAAS,CAAC,kBAAkB,CAAAF,QAAA,eAC7BlC,IAAA,WAAQoC,SAAS,CAAC,iBAAiB,CAAAF,QAAA,CAAC,SAAO,CAAQ,CAAC,cACpDlC,IAAA,WAAQoC,SAAS,CAAC,mBAAmB,CAAAF,QAAA,CAAC,aAAW,CAAQ,CAAC,cAC1DlC,IAAA,WAAQoC,SAAS,CAAC,mBAAmB,CAAAF,QAAA,CAAC,iBAAe,CAAQ,CAAC,cAC9DlC,IAAA,WAAQoC,SAAS,CAAC,mBAAmB,CAACc,OAAO,CAAEnB,mBAAoB,CAAAG,QAAA,CAAC,gBAAc,CAAQ,CAAC,EAC1F,CAAC,cACNhC,KAAA,MAAGkC,SAAS,CAAC,WAAW,CAAAF,QAAA,EAAC,aAAW,CAAC5B,IAAI,CAACuC,SAAS,EAAI,SAAS,EAAI,CAAC,EACpE,CAAC,EACL,CAAC,CACLnC,aAAa,eACVV,IAAA,CAACH,SAAS,EACNS,IAAI,CAAEA,IAAK,CACXE,IAAI,CAAEA,IAAK,CACX2C,OAAO,CAAEA,CAAA,GAAMxC,gBAAgB,CAAC,KAAK,CAAE,CAC1C,CACJ,CACAC,cAAc,eACXZ,IAAA,CAACF,UAAU,EACPqD,OAAO,CAAEA,CAAA,GAAMtC,iBAAiB,CAAC,KAAK,CAAE,CACxCuC,OAAO,CAAEA,CAAA,GAAM/C,QAAQ,CAAC,QAAQ,CAAE,CACrC,CACJ,EACA,CAAC,CACF,CAAC,CAEjB,CAEA,cAAe,CAAAF,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}